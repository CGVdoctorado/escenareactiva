<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infografía: Escena Reactiva</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #2c1d4a; 
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
        .flow-arrow {
            font-size: 2.5rem;
            line-height: 1;
            color: #F9B74F;
        }
        .flow-box {
            border: 2px solid #A65E9A;
            background-color: rgba(93, 62, 140, 0.5);
        }
    </style>
</head>
<body class="text-white">

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="text-center my-12">
            <h1 class="text-5xl md:text-7xl font-black tracking-tight text-[#F9F871]">Escena Reactiva</h1>
            <p class="text-xl md:text-2xl mt-4 text-gray-300">La Dramaturgia Re-activada en Tiempo Real</p>
        </header>

        <main>
            <section id="process-flow" class="mb-20">
                <div class="text-center max-w-3xl mx-auto mb-12">
                    <h2 class="text-3xl font-bold text-[#F27A7B] mb-4">El Ciclo Creativo</h2>
                    <p class="text-gray-300">Escena Reactiva opera en un ciclo dinámico y colaborativo. El proceso transforma las ideas del público en arte escénico de forma instantánea, creando una experiencia única en cada función.</p>
                </div>
                
                <div class="flex flex-col md:flex-row items-center justify-center space-y-8 md:space-y-0 md:space-x-8 text-center">
                    <div class="flow-box rounded-lg p-6 w-full md:w-1/4">
                        <h3 class="text-xl font-bold text-[#F9F871]">1. Input del Público</h3>
                        <p class="text-sm mt-2 text-gray-400">Ideas, frases y sensaciones son aportadas a través de una app.</p>
                    </div>
                    <div class="flow-arrow transform md:-rotate-0">&darr;</div>
                    <div class="flow-box rounded-lg p-6 w-full md:w-1/4">
                        <h3 class="text-xl font-bold text-[#F9F871]">2. Generación AI</h3>
                        <p class="text-sm mt-2 text-gray-400">El sistema procesa y genera micro-escenas dramáticas.</p>
                    </div>
                    <div class="flow-arrow transform md:-rotate-0">&darr;</div>
                    <div class="flow-box rounded-lg p-6 w-full md:w-1/4">
                        <h3 class="text-xl font-bold text-[#F9F871]">3. Interpretación</h3>
                        <p class="text-sm mt-2 text-gray-400">Actores en escena re-interpretan los textos en vivo.</p>
                    </div>
                </div>
            </section>

            <section id="data-visualization" class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12 mb-20">
                
                <div class="bg-[#5D3E8C] rounded-lg shadow-2xl p-6">
                    <h3 class="text-2xl font-bold text-center mb-4 text-[#F27A7B]">El Origen de la Creación</h3>
                    <p class="text-center text-gray-300 mb-6">El público es el principal catalizador. Sus contribuciones, basadas en estímulos como noticias de actualidad, alimentan al sistema. Las palabras clave son el método más directo y popular de participación.</p>
                    <div class="chart-container">
                        <canvas id="inputTypesChart"></canvas>
                    </div>
                </div>

                <div class="bg-[#5D3E8C] rounded-lg shadow-2xl p-6">
                    <h3 class="text-2xl font-bold text-center mb-4 text-[#F27A7B]">Composición de una Micro-Escena</h3>
                    <p class="text-center text-gray-300 mb-6">Cada texto generado es una fusión única. El sistema combina los estímulos iniciales con la creatividad del público, asegurando que cada escena sea relevante y original.</p>
                    <div class="chart-container">
                        <canvas id="sceneCompositionChart"></canvas>
                    </div>
                </div>

                <div class="md:col-span-2 bg-[#5D3E8C] rounded-lg shadow-2xl p-6">
                    <h3 class="text-2xl font-bold text-center mb-4 text-[#F27A7B]">Los Pilares de Escena Reactiva</h3>
                    <p class="text-center max-w-3xl mx-auto text-gray-300 mb-6">El proyecto se sostiene sobre un balance de componentes clave. La tecnología potencia la creatividad, el arte da forma a la interacción y la inmediatez garantiza una experiencia vibrante y auténtica.</p>
                    <div class="chart-container h-[400px] md:h-[450px] max-h-[500px]">
                        <canvas id="pillarsRadarChart"></canvas>
                    </div>
                </div>

                <div class="md:col-span-2 text-center bg-[#5D3E8C] rounded-lg shadow-2xl p-10">
                    <h3 class="text-2xl font-bold text-[#F9F871] mb-2">1 Obra Única por Función</h3>
                    <p class="text-4xl md:text-6xl font-black text-white my-4">∞</p>
                    <p class="text-gray-300 max-w-2xl mx-auto">La naturaleza del proceso garantiza que no haya dos funciones iguales. Cada interacción del público redefine la narrativa, resultando en un número infinito de posibles obras teatrales, cada una un reflejo del momento presente.</p>
                </div>

            </section>

            <section id="llm-features" class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12">
                <div class="bg-[#5D3E8C] rounded-lg shadow-2xl p-6">
                    <h3 class="text-2xl font-bold text-center mb-4 text-[#F9F871]">✨ Generador de Micro-Escenas</h3>
                    <p class="text-center text-gray-300 mb-6">Experimenta cómo Escena Reactiva genera textos dramáticos. Ingresa una palabra clave y observa cómo la IA crea una micro-escena en segundos.</p>
                    <div class="mb-4">
                        <label for="sceneKeyword" class="block text-gray-300 text-sm font-bold mb-2">Palabra Clave:</label>
                        <textarea id="sceneKeyword" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-200" rows="3" placeholder="Ej: esperanza, caos, futuro..."></textarea>
                    </div>
                    <button id="generateSceneBtn" class="bg-[#F9B74F] hover:bg-[#F27A7B] text-[#2c1d4a] font-bold py-2 px-4 rounded-full w-full transition duration-300 ease-in-out transform hover:scale-105">
                        Generar Micro-Escena ✨
                    </button>
                    <div id="sceneOutput" class="mt-6 p-4 bg-gray-800 rounded-lg text-gray-200 min-h-[80px] flex items-center justify-center text-center">
                        <span class="text-gray-400 italic">Aquí aparecerá tu micro-escena...</span>
                    </div>
                </div>

                <div class="bg-[#5D3E8C] rounded-lg shadow-2xl p-6">
                    <h3 class="text-2xl font-bold text-center mb-4 text-[#F9F871]">✨ Analizador de Emociones</h3>
                    <p class="text-center text-gray-300 mb-6">Descubre cómo el sistema puede interpretar el sentimiento detrás de una frase. Ingresa cualquier texto y la IA analizará la emoción predominante.</p>
                    <div class="mb-4">
                        <label for="emotionPhrase" class="block text-gray-300 text-sm font-bold mb-2">Tu Frase:</label>
                        <textarea id="emotionPhrase" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-200" rows="3" placeholder="Ej: Estoy muy feliz de estar aquí."></textarea>
                    </div>
                    <button id="analyzeEmotionBtn" class="bg-[#F9B74F] hover:bg-[#F27A7B] text-[#2c1d4a] font-bold py-2 px-4 rounded-full w-full transition duration-300 ease-in-out transform hover:scale-105">
                        Analizar Emoción ✨
                    </button>
                    <div id="emotionOutput" class="mt-6 p-4 bg-gray-800 rounded-lg text-gray-200 min-h-[80px] flex items-center justify-center text-center">
                        <span class="text-gray-400 italic">Aquí aparecerá el análisis de la emoción...</span>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center mt-20 py-8 border-t border-gray-700">
            <p class="text-xl font-bold text-[#F9F871]">Únete a la Re-activación</p>
            <p class="text-gray-400 mt-2">Experimenta la dramaturgia del mañana.</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const wrapText = (label, maxLength = 16) => {
                if (label.length <= maxLength) {
                    return label;
                }
                const words = label.split(' ');
                const lines = [];
                let currentLine = '';
                words.forEach(word => {
                    if ((currentLine + ' ' + word).trim().length > maxLength) {
                        lines.push(currentLine.trim());
                        currentLine = word;
                    } else {
                        currentLine = (currentLine + ' ' + word).trim();
                    }
                });
                if (currentLine) {
                    lines.push(currentLine.trim());
                }
                return lines;
            };

            const tooltipConfig = {
                plugins: {
                    tooltip: {
                        callbacks: {
                            title: function(tooltipItems) {
                                const item = tooltipItems[0];
                                let label = item.chart.data.labels[item.dataIndex];
                                return Array.isArray(label) ? label.join(' ') : label;
                            }
                        },
                        bodyFont: {
                            size: 14,
                        },
                        titleFont: {
                            size: 16,
                        },
                        padding: 12,
                        backgroundColor: 'rgba(44, 29, 74, 0.9)',
                        borderColor: '#A65E9A',
                        borderWidth: 1,
                    }
                }
            };

            const palette = {
                purple: '#5D3E8C',
                magenta: '#A65E9A',
                pink: '#F27A7B',
                yellow: '#F9B74F',
                lime: '#F9F871',
                white: 'rgba(255, 255, 255, 0.85)',
                grid: 'rgba(255, 255, 255, 0.2)'
            };

            const createInputTypesChart = () => {
                const ctx = document.getElementById('inputTypesChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Palabras Clave', 'Frases Completas', 'Aportes Verbales', 'Imágenes Sugeridas'].map(l => wrapText(l)),
                        datasets: [{
                            label: 'Frecuencia de Input',
                            data: [65, 20, 10, 5],
                            backgroundColor: [palette.lime, palette.pink, palette.yellow, palette.magenta],
                            borderColor: palette.purple,
                            borderWidth: 2
                        }]
                    },
                    options: {
                        ...tooltipConfig,
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y',
                        scales: {
                            x: {
                                beginAtZero: true,
                                grid: { color: palette.grid },
                                ticks: { color: palette.white, font: { size: 12 } }
                            },
                            y: {
                                grid: { display: false },
                                ticks: { color: palette.white, font: { size: 12 } }
                            }
                        },
                        plugins: {
                            ...tooltipConfig.plugins,
                            legend: { display: false }
                        }
                    }
                });
            };

            const createSceneCompositionChart = () => {
                const ctx = document.getElementById('sceneCompositionChart').getContext('2d');
                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Estímulo Inicial (Noticias)', 'Aportes del Público'],
                        datasets: [{
                            data: [40, 60],
                            backgroundColor: [palette.pink, palette.lime],
                            borderColor: palette.purple,
                            borderWidth: 4,
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        ...tooltipConfig,
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                             ...tooltipConfig.plugins,
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: palette.white,
                                    font: { size: 14 }
                                }
                            }
                        }
                    }
                });
            };

            const createPillarsRadarChart = () => {
                const ctx = document.getElementById('pillarsRadarChart').getContext('2d');
                new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['Tecnología', 'Co-creación', 'Arte Escénico', 'Inmediatez', 'Participación del Público'],
                        datasets: [{
                            label: 'Impacto en la Experiencia',
                            data: [8, 9, 7, 10, 9],
                            backgroundColor: 'rgba(242, 122, 123, 0.4)',
                            borderColor: palette.pink,
                            borderWidth: 2,
                            pointBackgroundColor: palette.pink,
                            pointBorderColor: palette.white,
                            pointHoverBackgroundColor: palette.white,
                            pointHoverBorderColor: palette.pink,
                            pointRadius: 5
                        }]
                    },
                    options: {
                        ...tooltipConfig,
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 10,
                                grid: { color: palette.grid },
                                pointLabels: {
                                    color: palette.white,
                                    font: { size: 14 }
                                },
                                ticks: {
                                    backdropColor: 'transparent',
                                    color: palette.white,
                                    stepSize: 2
                                }
                            }
                        },
                        plugins: {
                            ...tooltipConfig.plugins,
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            };

            createInputTypesChart();
            createSceneCompositionChart();
            createPillarsRadarChart();

            const sceneKeywordInput = document.getElementById('sceneKeyword');
            const generateSceneBtn = document.getElementById('generateSceneBtn');
            const sceneOutput = document.getElementById('sceneOutput');

            generateSceneBtn.addEventListener('click', async () => {
                const keyword = sceneKeywordInput.value.trim();
                if (!keyword) {
                    sceneOutput.innerHTML = '<span class="text-red-400">Por favor, ingresa una palabra clave.</span>';
                    return;
                }

                sceneOutput.innerHTML = '<span class="text-gray-400 italic">Generando...</span>';
                generateSceneBtn.disabled = true;

                try {
                    let chatHistory = [];
                    const prompt = `Genera una micro escena dramática corta y evocadora (máximo 30 palabras) usando la siguiente palabra clave: "${keyword}".`;
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                    const payload = { contents: chatHistory };
                    const apiKey = ""; 
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        sceneOutput.innerHTML = text;
                    } else {
                        sceneOutput.innerHTML = '<span class="text-red-400">Error al generar escena. Intenta de nuevo.</span>';
                    }
                } catch (error) {
                    sceneOutput.innerHTML = `<span class="text-red-400">Error de conexión: ${error.message}</span>`;
                } finally {
                    generateSceneBtn.disabled = false;
                }
            });

            const emotionPhraseInput = document.getElementById('emotionPhrase');
            const analyzeEmotionBtn = document.getElementById('analyzeEmotionBtn');
            const emotionOutput = document.getElementById('emotionOutput');

            analyzeEmotionBtn.addEventListener('click', async () => {
                const phrase = emotionPhraseInput.value.trim();
                if (!phrase) {
                    emotionOutput.innerHTML = '<span class="text-red-400">Por favor, ingresa una frase.</span>';
                    return;
                }

                emotionOutput.innerHTML = '<span class="text-gray-400 italic">Analizando...</span>';
                analyzeEmotionBtn.disabled = true;

                try {
                    let chatHistory = [];
                    const prompt = `Analiza la emoción o el sentimiento principal de la siguiente frase: "${phrase}". Responde concisamente con una o dos palabras, por ejemplo: 'Alegría', 'Tristeza', 'Enojo', 'Neutral', 'Sorpresa', 'Miedo'.`;
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                    const payload = { contents: chatHistory };
                    const apiKey = ""; 
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        emotionOutput.innerHTML = text;
                    } else {
                        emotionOutput.innerHTML = '<span class="text-red-400">Error al analizar emoción. Intenta de nuevo.</span>';
                    }
                } catch (error) {
                    emotionOutput.innerHTML = `<span class="text-red-400">Error de conexión: ${error.message}</span>`;
                } finally {
                    analyzeEmotionBtn.disabled = false;
                }
            });
        });
    </script>
</body>
</html>
